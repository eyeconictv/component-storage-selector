"undefined"!=typeof angular&&angular.module("risevision.widget.common.storage-selector.config",[]).value("STORAGE_MODAL","https://apps.risevision.com/storage-selector.html#/?cid="),function(){"use strict";angular.module("risevision.widget.common.storage-selector",["risevision.widget.common.storage-selector.config"]).directive("storageSelector",["$templateCache","$log","fileManagerConfig",function(e,t,n){return{restrict:"EA",scope:{fileType:"@",selectionType:"@",label:"@",selected:"="},template:e.get("storage-selector.html"),link:function(e){e.open=function(){function o(e){for(var t=e.toLowerCase(),n=0,o=r.length;o>n;n++)if(-1!==t.indexOf(r[n]))return!0;return!1}function i(e){if(e){var t=e.replace("http://","").replace("https://",""),o=n.root,i=t.split(o),s=[];if(i.length>=2){var r=i[1].split("/"),a=o;r.forEach(function(e,t){e.length>0&&(t+1===r.length&&e.includes(".")||(s.push({path:a+e+"/",displayName:e}),a=a+e+"/"))})}return s}return[]}function s(e){return!e.mimeType||o(e.url)}console.log("fileManagerConfig",n);var r,a=window.eyeconicFileManager,l=[".jpg",".jpeg",".png",".bmp",".svg",".gif",".webp"],c=[".webm",".mp4",".ogv",".ogg"];switch(e.fileType){case"image":r=l;break;case"video":r=c;break;default:r=[],l.forEach(function(e){r.push(e)}),c.forEach(function(e){r.push(e)})}var g,u=Object.assign({},n,{filterItems:s,selectionType:e.selectionType,accept:r.join(","),directoryHistory:e.selected?i(e.selected):[],onSelected:function(n){e.files=[n.url],t.info("Picked: ",e.files),g.setOpen(!1),e.$emit("picked",e.files,e.fileType,n,e.selectionType)}});g=a.useFileManager(u,document.getElementById("file-selector")),g.setOpen(!0)}}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log","STORAGE_MODAL",function(e,t,n,o,i,s){e.storageUrl=n,e.isSameOrigin=function(e){var t=document.createElement("a");return t.href=s,-1!==e.indexOf(t.host)},e.messageHandler=function(n){e.isSameOrigin(n.origin)&&(Array.isArray(n.data)?t.close(n.data):"string"==typeof n.data&&"close"===n.data&&t.dismiss("cancel"))},o.addEventListener("message",e.messageHandler)}]),function(e){try{e=angular.module("risevision.widget.common.storage-selector")}catch(t){e=angular.module("risevision.widget.common.storage-selector",[])}e.run(["$templateCache",function(e){"use strict";e.put("storage-selector.html",'\n<label class="storage-selector-icon" ng-class="{\'icon-right\': label}">\n  <button class="btn btn-default" ng-class="{active: selected}" ng-click="open()" type="button" >\n    <!-- {{ label }}<img src="http://s3.amazonaws.com/Rise-Images/Icons/storage.png" > -->\n    Upload\n  </button>\n</label>\n<div id="file-selector"></div>\n\n')}])}();